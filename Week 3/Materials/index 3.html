<!DOCTYPE html>
<html>
<head>
  <title>Week 3: Introduction to the Tidyverse</title>
  <meta charset="utf-8">
  <meta name="description" content="Week 3: Introduction to the Tidyverse">
  <meta name="author" content="Jake Campbell">
  <meta name="generator" content="slidify" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/default.css" media="all" >
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/phone.css" 
    media="only screen and (max-device-width: 480px)" >
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/slidify.css" >
  <link rel="stylesheet" href="libraries/highlighters/highlight.js/css/tomorrow.css" />
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->  <link rel=stylesheet href="./assets/css/ribbons.css"></link>

  
  <!-- Grab CDN jQuery, fall back to local if offline -->
  <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.min.js"></script>
  <script>window.jQuery || document.write('<script src="libraries/widgets/quiz/js/jquery.js"><\/script>')</script> 
  <script data-main="libraries/frameworks/io2012/js/slides" 
    src="libraries/frameworks/io2012/js/require-1.0.8.min.js">
  </script>
  
  

</head>
<body style="opacity: 0">
  <slides class="layout-widescreen">
    
    <!-- LOGO SLIDE -->
        <slide class="title-slide segue nobackground">
  <hgroup class="auto-fadein">
    <h1>Week 3: Introduction to the Tidyverse</h1>
    <h2>08/10/2019</h2>
    <p>Jake Campbell<br/></p>
  </hgroup>
  <article></article>  
</slide>
    

    <!-- SLIDES -->
    <slide class="" id="slide-1" style="background:white;">
  <hgroup>
    <h2>What is the Tidyverse?</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li><p>The tidyverse is a set of packages developed for data science and manipulation</p>

<ul>
<li>They share a common philosophy and grammar</li>
<li>Intended to make code more understandable</li>
</ul></li>
<li><p>R is a bit antiquated</p></li>
<li><p>Several different people contributing code can lead to confusion and overlapping ideas</p></li>
<li><p>Tidyverse packages have different purposes, but read easily into each other</p></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-2" style="background:white;">
  <hgroup>
    <h2>Download the Packages</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li><p>The tidyverse consists of several different packages</p></li>
<li><p>We can download them all at once, though</p>

<ul>
<li>Just call <code>install.packages(&quot;tidyverse&quot;)</code></li>
</ul></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-3" style="background:white;">
  <hgroup>
    <h2>Reshaping Data</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li><p>Data generally comes in wide and long format</p></li>
<li><p>Wide format makes every value a column</p></li>
<li><p>Long format puts multiple values in a single column, creating another column that provides a key to the value column </p></li>
<li><p>Consider the goal of your analysis when choosing which format</p></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-4" style="background:white;">
  <hgroup>
    <h2>Reshaping with <code>tidyr</code></h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li><p><code>tidyr</code> allows us to easily go from long to wide or vice-versa</p></li>
<li><p>The main functions we&#39;ll use are <code>gather()</code> and <code>spread()</code></p>

<ul>
<li>These change datasets into long and wide formats, respectively</li>
</ul></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-5" style="background:white;">
  <hgroup>
    <h2>Going from Wide to Long</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>We&#39;ll use <code>gather()</code> to go from wide to long</li>
<li>We need to first specify what columns we are gathering

<ul>
<li>The names of the columns will become our key, their values become our value</li>
<li>We need to also specify the new <code>key</code> and <code>value</code> column names</li>
</ul></li>
</ul>

<pre><code class="r">long.tb &lt;- gather(Year1, Year2, data = initial.tb, key = Year, value = Cases)
long.tb
</code></pre>

<pre><code>## # A tibble: 6 x 3
##   country     Year   Cases
##   &lt;chr&gt;       &lt;chr&gt;  &lt;int&gt;
## 1 Afghanistan Year1    745
## 2 Brazil      Year1  37737
## 3 China       Year1 212258
## 4 Afghanistan Year2   2666
## 5 Brazil      Year2  80488
## 6 China       Year2 213766
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-6" style="background:white;">
  <hgroup>
    <h2>Going from Long to Wide</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>We&#39;ll use <code>spread()</code> to go from long to wide</li>
<li>We need to first specify where the data is coming from, followed by the key and value columns</li>
</ul>

<pre><code class="r">spread(data = long.tb, key = Year, value = Cases)
</code></pre>

<pre><code>## # A tibble: 3 x 3
##   country      Year1  Year2
##   &lt;chr&gt;        &lt;int&gt;  &lt;int&gt;
## 1 Afghanistan    745   2666
## 2 Brazil       37737  80488
## 3 China       212258 213766
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-7" style="background:white;">
  <hgroup>
    <h2>Data Manipulation with <code>dplyr</code></h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li><p><code>dplyr</code> has several functions for manipulating data frames</p></li>
<li><p>We can chain functions together using <code>%&gt;%</code></p>

<ul>
<li>Also known as the pipe operator</li>
<li>Note that if for some reason we needed to refer back to the tibble we are manipulating, we would specify it with a <code>.</code></li>
</ul></li>
</ul>

<pre><code class="r"># Format would look like this

data_frame_x %&gt;%
  function_x()
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-8" style="background:white;">
  <hgroup>
    <h2>Some Common <code>dplyr</code> Functions</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li><code>select()</code>: pick certain variables</li>
<li><code>filter()</code>: filter your data on a given condition</li>
<li><code>arrange()</code>: order your data</li>
<li><code>mutate()</code>: create a new column</li>
<li><code>rename()</code>: rename your columns</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-9" style="background:white;">
  <hgroup>
    <h2><code>select</code></h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>With <code>select</code>, we just specify the variables we want to choose

<ul>
<li>We can instead specify what columns we don&#39;t want by putting a <code>-</code> before the column</li>
</ul></li>
</ul>

<pre><code class="r">initial.starwars %&gt;%
  # Select height and birth year of all characters
  select(height, birth_year) %&gt;%
  head()
</code></pre>

<pre><code>## # A tibble: 6 x 2
##   height birth_year
##    &lt;int&gt;      &lt;dbl&gt;
## 1    172       19  
## 2    167      112  
## 3     96       33  
## 4    202       41.9
## 5    150       19  
## 6    178       52
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-10" style="background:white;">
  <hgroup>
    <h2><code>filter</code></h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>With <code>filter</code>, we subset the tibble on some condition

<ul>
<li>Remember that <code>==</code> means equal to and <code>!=</code> means not equal to</li>
</ul></li>
</ul>

<pre><code class="r">initial.starwars %&gt;%
  # Filter on only males
  filter(gender == &quot;male&quot;) %&gt;%
  head()
</code></pre>

<pre><code>## # A tibble: 6 x 10
##   name  height  mass hair_color skin_color eye_color birth_year gender
##   &lt;chr&gt;  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; 
## 1 Luke~    172    77 blond      fair       blue            19   male  
## 2 Dart~    202   136 none       white      yellow          41.9 male  
## 3 Owen~    178   120 brown, gr~ light      blue            52   male  
## 4 Bigg~    183    84 black      light      brown           24   male  
## 5 Obi-~    182    77 auburn, w~ fair       blue-gray       57   male  
## 6 Anak~    188    84 blond      fair       blue            41.9 male  
## # ... with 2 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-11" style="background:white;">
  <hgroup>
    <h2><code>arrange</code></h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>With <code>arrange</code>, we order the tibble by some column

<ul>
<li>By default, order is ascending; to get descending order, we must use <code>desc()</code></li>
</ul></li>
</ul>

<pre><code class="r">initial.starwars %&gt;%
  # Arrange by descending height
  arrange(desc(height)) %&gt;%
  head()
</code></pre>

<pre><code>## # A tibble: 6 x 10
##   name  height  mass hair_color skin_color eye_color birth_year gender
##   &lt;chr&gt;  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; 
## 1 Yara~    264    NA none       white      yellow            NA male  
## 2 Tarf~    234   136 brown      brown      blue              NA male  
## 3 Lama~    229    88 none       grey       black             NA male  
## 4 Chew~    228   112 brown      unknown    blue             200 male  
## 5 Roos~    224    82 none       grey       orange            NA male  
## 6 Grie~    216   159 none       brown, wh~ green, y~         NA male  
## # ... with 2 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-12" style="background:white;">
  <hgroup>
    <h2><code>mutate</code></h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li><code>mutate</code> allows us to create new columns

<ul>
<li>Remember to save your output if you want to keep it!</li>
</ul></li>
</ul>

<pre><code class="r">new.starwars&lt;-
  initial.starwars %&gt;%
  # Creating a new column that is the square root of height
  mutate(sqrt_height = sqrt(height))

new.starwars %&gt;%
  select(height, sqrt_height)
</code></pre>

<pre><code>## # A tibble: 87 x 2
##    height sqrt_height
##     &lt;int&gt;       &lt;dbl&gt;
##  1    172       13.1 
##  2    167       12.9 
##  3     96        9.80
##  4    202       14.2 
##  5    150       12.2 
##  6    178       13.3 
##  7    165       12.8 
##  8     97        9.85
##  9    183       13.5 
## 10    182       13.5 
## # ... with 77 more rows
</code></pre>

<pre><code class="r">  head(3)
</code></pre>

<pre><code>## [1] 3
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-13" style="background:white;">
  <hgroup>
    <h2><code>rename</code></h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li><code>rename</code> allows us to change the name of a column

<ul>
<li>First specify the new name, than specify what column is being renamed</li>
</ul></li>
</ul>

<pre><code class="r">initial.starwars %&gt;%
  # Rename name to full_name
  rename(full_name = name) %&gt;%
  head()
</code></pre>

<pre><code>## # A tibble: 6 x 10
##   full_name height  mass hair_color skin_color eye_color birth_year gender
##   &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; 
## 1 Luke Sky~    172    77 blond      fair       blue            19   male  
## 2 C-3PO        167    75 &lt;NA&gt;       gold       yellow         112   &lt;NA&gt;  
## 3 R2-D2         96    32 &lt;NA&gt;       white, bl~ red             33   &lt;NA&gt;  
## 4 Darth Va~    202   136 none       white      yellow          41.9 male  
## 5 Leia Org~    150    49 brown      light      brown           19   female
## 6 Owen Lars    178   120 brown, gr~ light      blue            52   male  
## # ... with 2 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-14" style="background:white;">
  <hgroup>
    <h2><code>summarize</code></h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>With <code>summarize</code>, we can perform certain summary statistics, like finding the average, or getting a count</li>
</ul>

<pre><code class="r">initial.starwars %&gt;%
  # Here we are finding the average height of all characters
  summarize(avg.height = mean(height, na.rm=T))
</code></pre>

<pre><code>## # A tibble: 1 x 1
##   avg.height
##        &lt;dbl&gt;
## 1       174.
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-15" style="background:white;">
  <hgroup>
    <h2><code>group_by</code></h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li><code>group_by</code> allows us to perform different operations by groups

<ul>
<li>If we want to end the grouping, use <code>ungroup()</code></li>
</ul></li>
</ul>

<pre><code class="r">initial.starwars %&gt;%
  # Grouping by gender
  group_by(gender) %&gt;%
  # Finding average height
  summarize(avg.height = mean(height, na.rm=T)) %&gt;%
  # Remember to ungroup if you want to perform non-grouped functions 
  # after grouping
  ungroup()
</code></pre>

<pre><code>## # A tibble: 5 x 2
##   gender        avg.height
##   &lt;chr&gt;              &lt;dbl&gt;
## 1 &lt;NA&gt;                120 
## 2 female              165.
## 3 hermaphrodite       175 
## 4 male                179.
## 5 none                200
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-16" style="background:white;">
  <hgroup>
    <h2>Chaining Functions</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>With the <code>%&gt;%</code> operator, we can easily chain several functions together</li>
</ul>

<pre><code class="r">initial.starwars %&gt;%
  # Filter characters taller than 200 cm
  filter(height &gt; 200) %&gt;%
  # Select the mass column
  select(mass) %&gt;%
  # Order mass in descending order
  arrange(desc(mass))
</code></pre>

<pre><code>## # A tibble: 10 x 1
##     mass
##    &lt;dbl&gt;
##  1   159
##  2   136
##  3   136
##  4   112
##  5    88
##  6    82
##  7    80
##  8    NA
##  9    NA
## 10    NA
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

    <slide class="backdrop"></slide>
  </slides>
  <div class="pagination pagination-small" id='io2012-ptoc' style="display:none;">
    <ul>
      <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=1 title='What is the Tidyverse?'>
         1
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=2 title='Download the Packages'>
         2
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=3 title='Reshaping Data'>
         3
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=4 title='Reshaping with <code>tidyr</code>'>
         4
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=5 title='Going from Wide to Long'>
         5
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=6 title='Going from Long to Wide'>
         6
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=7 title='Data Manipulation with <code>dplyr</code>'>
         7
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=8 title='Some Common <code>dplyr</code> Functions'>
         8
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=9 title='<code>select</code>'>
         9
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=10 title='<code>filter</code>'>
         10
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=11 title='<code>arrange</code>'>
         11
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=12 title='<code>mutate</code>'>
         12
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=13 title='<code>rename</code>'>
         13
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=14 title='<code>summarize</code>'>
         14
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=15 title='<code>group_by</code>'>
         15
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=16 title='Chaining Functions'>
         16
      </a>
    </li>
  </ul>
  </div>  <!--[if IE]>
    <script 
      src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js">  
    </script>
    <script>CFInstall.check({mode: 'overlay'});</script>
  <![endif]-->
</body>
  <!-- Load Javascripts for Widgets -->
  
  <!-- LOAD HIGHLIGHTER JS FILES -->
  <script src="libraries/highlighters/highlight.js/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <!-- DONE LOADING HIGHLIGHTER JS FILES -->
   
  </html>